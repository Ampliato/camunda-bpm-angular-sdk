"use strict";angular.module("camBpmSdk",[]).value("HttpClient",CamSDK.Client).value("CamForm",CamSDK.Form).value("MockHttpClient",CamSDKMocks).factory("camApiHttpClient",["MockHttpClient","$rootScope",function(t,n){function e(n){var e=n.mock===!0?t:CamSDK.Client.HttpClient;this._wrapped=new e(n)}return angular.forEach(["post","get","load","put","del"],function(t){e.prototype[t]=function(e,o){if(o.done){var i=o.done;o.done=function(t,e){n.$apply(function(){i(t,e)})},this._wrapped[t](e,o)}}}),angular.forEach(["on","once","off","trigger"],function(t){e.prototype[t]=function(){this._wrapped[t].apply(this,arguments)}}),e}]).provider("camApi",function(){var t={apiUri:"engine-rest/engine"};this.setApiConfiguration=function(n){t=n},this.$get=["camApiHttpClient",function(n){var e=angular.copy(t);return e.HttpClient=n,new CamSDK.Client(e)}]}),angular.module("camBpmSdk").run(["$templateCache",function(t){t.put("directives/camForm/camForm.html",'<div class="cam-form-container"></div>\n<button ng-click="submitForm()">Submeter</button>\n')}]),angular.module("camForm",["camBpmSdk"]).directive("camForm",function(){return{restrict:"EA",scope:{processDefinition:"=",task:"="},controller:["$scope","$element","camApi",function(t,n,e){function o(){t._camForm=null;var n,o=(t.formKey||"").split("embedded:"),i=t.formContextPath||"";if(o.length>1?(n=o.pop(),i+="/"!==i.slice(-1)?"/":"",n=n.replace(/app:(\/?)/,i)):n=t.formKey,!n)throw"ErRor";t._camForm=new CamSDK.Form({processDefinitionId:t.processDefinition.id,taskId:t.task?t.task.id:null,containerElement:r,client:e,formUrl:n,initialized:function(){console.log("asdasd");var n=r.injector();n.invoke(["$compile",function(n){n(r)(t)}])}})}function i(){e.resource("process-definition").startForm({id:t.processDefinition.id},function(n,e){if(n)throw n;e.key&&(t.formKey=e.key,t.formContextPath=e.contextPath,o())})}var r=angular.element(n.children()[0]);t.submitForm=function(){t._camForm.submit(function(t){if(t)throw t;console.log("success!")})},t.$watch("processDefinition",function(){t.processDefinition&&i()}),t.$watch("task",function(){t.taskId&&i()})}],link:function(){},templateUrl:"directives/camForm/camForm.html"}}).directive("camFormVariable",function(){return{restrict:"A",scope:{},controller:["$scope","$element",function(){}]}});